{% extends 'passionProjectApp/base.html' %}
{% block body %}
<p></p>
<div class="test">
{% if question %}
<div class="titlepadding">
    <h1 class="questionTitle"> {% autoescape off %}{{question.title}} {% endautoescape %}</h1>
    <a class="askbutton" href="{% url 'ask' %}"><button type="button" class="btn registerbutton">Ask a question</button></a>
</div>
<hr/>

    <div class="questionMargin"><div class="questionFont">{% autoescape off%}{{question.question}} {% endautoescape %}</div>
    <div class="questionOptions">
        {% if request.user == question.author %}
    <span class="editlinks">
    <a class= 'editMargins' href="{% url 'ask_edit' question.id %}"><abbr title="revise and improve post">edit</abbr></a>
    <a href="{% url 'ask_del' question.id %}"><abbr title="remove post including answers and comments">delete</abbr></a>
    {% endif %}
    </span>
    {% if question.last_update > question.date_created %}
    <span class="createdProfile"><abbr title="{{question.last_update}}">
        {% load tz %} edited {{ question.last_update|utc|date:"M j 'y"}} at {{ question.last_update|utc|date:'H:i' }}</abbr> <span class="dateCreatedMargin">Asked <abbr title="{{question.date_created}}"> {{ question.date_created|utc|date:"M j 'y"}} at {{ question.date_created|utc|date:'H:i' }} by {{question.author}}</abbr></span>
    </span>
    {% else %}
        <span ><abbr class="" title="{{question.date_created}}">
            {% load tz %} asked {{ question.date_created|utc|date:"M j 'y"}} at {{ question.date_created|utc|date:'H:i' }} by {{question.author}}
        </abbr></span>
    {% endif %}
    {% endif %}
    </div>
        <hr/>
        {% if question_comment %}
        {% for x in question_comment %}
        <div class="qComment">
        {% autoescape off %} {{x.message}} {% endautoescape %} — <span>{{x.author}}<abbr title="{{x.last_update}}">
            {% load tz %}{{ x.date_created|utc|date:"M j 'y "}}{{ x.date_created|utc|date:'H:i' }}</abbr></span>
           {% if x.last_update > x.date_created %}
            {% load static %}
            <abbr title="edited on {{x.last_update}}"><img src="{% static 'passionProjectApp/images/pencil-2x.png'%}"></abbr>
            {% endif %}
        {% if request.user == x.author %}
        <div class="qCommentLinks">
            <a class="qCommentMargin" href="{% url 'comment_ask_edit' x.id %}"><abbr title="revise and improve post">edit</abbr></a>
        <a href="{% url 'comment_ask_del' x.id %}">delete</a></div>
        {% endif %}
        </div>
        <hr/>
        {% endfor %}
        {% endif %}
        <a class="addQComment" href="{% url 'comment_ask' question.id %}">Comment on a Question</a>

        {% if answers %}
        <br/><br/><br/><br/><br/><br/><br/>
        <h1>Answers</h1>
        <hr>
        {% for x in answers %}
        <div class="questionFont">{% autoescape off%}{{x.message}} {% endautoescape %}</div>
        <div class="questionOptions">
            {% if request.user == x.author %}
            <span class="editlinks">
    <a class= 'editMargins' href="{% url 'answer_edit' x.id %}"><abbr title="revise and improve post">edit</abbr></a>
    <a href="{% url 'answer_del' question.id %}"><abbr title="remove post including answers and comments">delete</abbr></a>
    {% endif %}
    </span>
            {% if x.last_update > x.date_created %}
            <span class="createdProfile"><abbr title="{{question.last_update}}">
        {% load tz %} edited {{ x.last_update|utc|date:"M j 'y"}} at {{ x.last_update|utc|date:'H:i' }}</abbr> <span class="dateCreatedMargin">Asked <abbr title="{{x.date_created}}"> {{x.date_created|utc|date:"M j 'y"}} at {{x.date_created|utc|date:'H:i' }} by {{x.author}}</abbr></span>
    </span>
            {% else %}
            <span ><abbr class="" title="{{x.date_created}}">
            {% load tz %} asked {{ x.date_created|utc|date:"M j 'y"}} at {{ x.date_created|utc|date:'H:i' }} by {{x.author}}
        </abbr></span>

            {% endif %}
        </div>
        <hr/>


        {% if answer_comment %}
        {% for y in answer_comment %}
        {% if y.parent == x %}
        <div class="qComment">
            {% autoescape off %} {{y.message}} {% endautoescape %} — <span>{{y.author}}<abbr title="{{y.last_update}}">
            {% load tz %}{{ y.date_created|utc|date:"M j 'y "}}{{ y.date_created|utc|date:'H:i' }}</abbr></span>
            {% if y.last_update > y.date_created %}
            {% load static %}
            <abbr title="edited on {{y.last_update}}"><img src="{% static 'passionProjectApp/images/pencil-2x.png'%}"></abbr>
            {% endif %}
            {% if request.user == y.author %}
            <div class="qCommentLinks">
                <a class="qCommentMargin" href="{% url 'comment_answer_edit' y.id x.parent_id %}"><abbr title="revise and improve post">edit</abbr></a>
                <a href="{% url 'comment_answer_del' y.id x.parent_id %}">delete</a></div>
            {% endif %}
        </div>
        <hr/>
        <p><a href="{% url 'comment_answer' x.id%}">Comment on an answer</a></p>
        <br/><br/>
        {% endif %}
        {% endfor %}
        {% endif %}



        {% endfor %}
        <h1>Your answer</h1>
        {% endif %}
        <form  onsubmit="putCookie()" class="askForm" method ='POST' action="{% url 'answer' question.id %}">
            {% csrf_token %}
            {{form.as_p}}
            <p><button >Submit</button></p>
        </form>
    </div>
</div>
{% endblock body %}